@echo off
echo ========================================
echo    üèóÔ∏è  –ü–û–†–¢–§–û–õ–ò–û - –°–ë–û–†–ö–ê –î–õ–Ø –ü–†–û–î–ê–ö–®–ù–ê
echo ========================================
echo.

echo [1/3] –û—Å—Ç–∞–Ω–æ–≤–∫–∞ dev-—Å–µ—Ä–≤–µ—Ä–∞...
taskkill /IM node.exe /F >nul 2>&1
echo ‚úÖ –ü—Ä–æ—Ü–µ—Å—Å—ã –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

echo.
echo [2/3] –û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å–±–æ—Ä–∫–∏...
if exist ".next" (
    rmdir /s /q ".next"
    echo ‚úÖ –ö—ç—à .next –æ—á–∏—â–µ–Ω
)
if exist "out" (
    rmdir /s /q "out"
    echo ‚úÖ –ü–∞–ø–∫–∞ out –æ—á–∏—â–µ–Ω–∞
)

echo.
echo [3/3] –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞...
echo üîÑ –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è npm run build...
call npm run build

if %errorlevel% equ 0 (
    echo.
    echo ========================================
    echo ‚úÖ –°–ë–û–†–ö–ê –£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–ê!
    echo ========================================
    echo üìÅ –ì–æ—Ç–æ–≤–∞—è —Å–±–æ—Ä–∫–∞ –≤ –ø–∞–ø–∫–µ: .next
    echo üåê –î–ª—è –∑–∞–ø—É—Å–∫–∞: npm start
    echo.
) else (
    echo.
    echo ========================================
    echo ‚ùå –û–®–ò–ë–ö–ê –°–ë–û–†–ö–ò!
    echo ========================================
    echo –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—à–∏–±–∫–∏ –≤—ã—à–µ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞
    echo.
)

pause